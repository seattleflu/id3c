<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width" />
    <title>api documentation</title>
    <link rel="stylesheet" href="https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css">
  </head>
  <body class="sans-serif dark-gray ma0 pa4 measure-wide">
    <h1 class="mt0">API</h1>

    <h2>Authentication</h2>

    <p>All routes require
    <a href="https://en.wikipedia.org/wiki/Basic_access_authentication">Basic
    access authentication</a> over HTTPS unless otherwise noted.

    <h2>Request and response bodies</h2>

    <p>All routes which receive request bodies expect a Content-Type of
    <code>application/json</code> unless otherwise noted.

    <p>All request bodies must be encoded with UTF-8.  All response bodies are
    encoded with UTF-8 unless explicitly declared otherwise by a Content-Type
    header.

    <h2>Status codes</h2>

    <p>All routes use standard HTTP status codes.

    <p>If the Content-Type of a <code>400 Bad Request</code> response is
    <code>application/json</code>, then the body will be a JSON object with at
    least the key <code>error</code>.  Additional keys may provide more
    details.

    <h2>Routes</h2>

    <h3 class="code">POST /v1/receiving/enrollment</h3>
    <p>Stores the request data as an enrollment document in a receiving area of
    the study database. Accepts any JSON object.

    <h3 class="code">POST /v1/receiving/presence-absence</h3>
    <p>Stores the request data as presence/absence calls in a receiving area of
    the study database. Accepts any JSON object.

    <h3 class="code">POST /v1/receiving/sequence-read-set</h3>
    <p>Stores the request data as a sequence read set document in a receiving
    area of the study database.

    <p>By convention, the body of the request should be a JSON object like the
    following:

      <pre>
      {
          "source": {
            "sample": "20e1d4a2",
            ...
          },
          "reads": [
            "https://server/path/to/reads_L001_R1_001.fastq.gz",
            "https://server/path/to/reads_L001_R2_001.fastq.gz",
            ...
          ]
      }
      </pre>

    <h3 class="code">POST /v1/receiving/redcap-det</h3>
    <p>Stores the request data from a REDCap data entry trigger (DET) in a
    receiving area of the study database. Accepts any URL-encoded form data.
    </p>

    <h3 class="code">POST /v1/receiving/consensus-genome</h3>
    <p>Stores the request data as a consensus genome document in a receiving
    area of the study database.

    <h3 class="code">GET /v1/shipping/augur-build-metadata</h3>
    <p>Exports consensus genome metadata necessay for SFS augur-build.

    <hr>

    <h2>Legacy Routes</h2>
    <p>
      These routes have been deprecated but continue to be supported (for now).
    </p>

    <h3 class="code">POST /enrollment</h3>
    <p>Stores the request data as an enrollment document in a receiving area of
    the study database. Accepts any JSON object.

    <h3 class="code">POST /presence-absence</h3>
    <p>Stores the request data as presence/absence calls in a receiving area of
    the study database. Accepts any JSON object.

    <h3 class="code">POST /sequence-read-set</h3>
    <p>Stores the request data as a sequence read set document in a receiving
    area of the study database.

    <p>By convention, the body of the request should be a JSON object like the
    following:

<pre>{
  "source": {
    "sample": "20e1d4a2",
    ...
  },
  "reads": [
    "https://server/path/to/reads_L001_R1_001.fastq.gz",
    "https://server/path/to/reads_L001_R2_001.fastq.gz",
    ...
  ]
}</pre>

  </body>
</html>
